<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>弹道轨迹与函数图像教学</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f1a3d, #1d2b4d, #2c3e66);
            color: #fff;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: rgba(15, 30, 70, 0.8);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            border: 2px solid #4a6fc5;
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            color: #FFD700;
        }
        
        .subtitle {
            font-size: 1.5rem;
            color: #FFA500;
            margin-bottom: 20px;
        }
        
        .game-icon {
            font-size: 2.5rem;
            color: #FF4500;
            margin: 0 10px;
        }
        
        .section {
            background: rgba(20, 25, 60, 0.85);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
            border: 1px solid #4a6fc5;
        }
        
        h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: #00FFFF;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #FFA500;
            margin: 20px 0 10px;
            font-size: 1.5rem;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 1.15rem;
            line-height: 1.7;
        }
        
        .formula-box {
            background: linear-gradient(to right, rgba(0, 30, 60, 0.8), rgba(10, 40, 80, 0.8));
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #FFD700;
        }
        
        .formula {
            font-family: 'Cambria Math', serif;
            font-size: 1.5rem;
            padding: 15px;
            text-align: center;
            color: #FFD700;
        }
        
        .illustration {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .graph-container {
            width: 100%;
            height: 380px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            margin: 20px 0;
            padding: 15px;
        }
        
        .columns {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .column {
            flex: 1;
            min-width: 300px;
        }
        
        .simulation-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
            background: rgba(10, 20, 50, 0.8);
            padding: 20px;
            border-radius: 10px;
            width: 100%;
            border: 1px solid #4a6fc5;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 220px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        label {
            margin-bottom: 8px;
            font-weight: bold;
            color: #FFD700;
            font-size: 1.1rem;
        }
        
        input[type="range"] {
            width: 220px;
            height: 12px;
            -webkit-appearance: none;
            background: linear-gradient(to right, #1a5f9e, #34c3eb);
            border-radius: 5px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #FFA500;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 165, 0, 0.8);
        }
        
        .value-display {
            font-weight: bold;
            margin-top: 8px;
            color: #FFD700;
            font-size: 1.2rem;
            min-width: 100px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
        }
        
        .simulation-canvas-container {
            width: 100%;
            height: 520px; /* 更大的画布区域 */
            background: rgba(0, 15, 30, 0.7);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
            overflow: hidden;
            margin-bottom: 20px;
            position: relative;
            border: 1px solid #4a6fc5;
        }
        
        #trajectoryGraph {
            width: 100%;
            height: 100%;
        }
        
        .params-display {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            width: 100%;
            background: rgba(10, 30, 70, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 1px solid #4a6fc5;
        }
        
        .param-item {
            text-align: center;
            padding: 10px;
            min-width: 200px;
        }
        
        .param-label {
            font-size: 1.1rem;
            color: #FFD700;
            margin-bottom: 5px;
        }
        
        .param-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #FFA500;
        }
        
        .summary {
            background: linear-gradient(to right, rgba(0, 50, 100, 0.7), rgba(0, 70, 120, 0.7));
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border-left: 5px solid #00FF00;
        }
        
        .conclusion {
            text-align: center;
            font-size: 1.2rem;
            margin-top: 30px;
            padding: 20px;
            font-style: italic;
            background: rgba(0, 80, 0, 0.3);
            border-radius: 15px;
            border: 1px solid #4CAF50;
        }
        
        .conclusion p {
            font-size: 1.4rem;
            color: #7FFFD4;
        }
        
        .key-points {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .point-card {
            flex: 1;
            background: rgba(30, 40, 90, 0.7);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #FFA500;
        }
        
        @media (max-width: 768px) {
            .columns, .key-points {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .simulation-canvas-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fa-solid fa-bullseye"></i> 弹道轨迹与函数图像 <i class="fa-solid fa-gun"></i></h1>
            <p class="subtitle">通过枪战游戏中的子弹轨迹理解函数图像</p>
            <p>探索子弹飞行的数学原理，理解坐标系中的线性函数和二次函数</p>
        </header>
        
        <div class="section">
            <h2><i class="fa-solid fa-book-open"></i> 课程引入</h2>
            <p>在枪战游戏中，子弹的飞行轨迹遵循着精确的数学规律。通过分析弹道轨迹，我们可以直观地理解两种重要的函数：一元一次函数（线性函数）和一元二次函数（抛物线）。</p>
            
            <div class="columns">
                <div class="column">
                    <h3>水平射击（平抛运动）</h3>
                    <p>当我们水平射击时，子弹的运动可以分解为两个方向：</p>
                    <div class="formula-box">
                        <div class="formula">水平方向：匀速直线运动 → 一元一次函数</div>
                        <div class="formula">垂直方向：自由落体运动 → 一元二次函数</div>
                    </div>
                    <p>水平位移随时间呈线性变化（x ∝ t），垂直位移随时间呈二次曲线变化（y ∝ t²）。</p>
                </div>
                
                <div class="column">
                    <h3>倾斜射击（斜抛运动）</h3>
                    <p>当我们以一定角度射击时，子弹的运动轨迹是一条抛物线：</p>
                    <div class="formula-box">
                        <div class="formula">轨迹方程：y = (tanθ)·x - (g/(2v²cos²θ))·x²</div>
                    </div>
                    <p>这是典型的一元二次函数形式：y = ax + bx²，其中a和b由发射角度和速度决定。</p>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2><i class="fa-solid fa-calculator"></i> 数学原理</h2>
            <div class="columns">
                <div class="column">
                    <h3>水平方向运动（一元一次函数）</h3>
                    <div class="formula-box">
                        <div class="formula">x = v<sub>x</sub> · t</div>
                        <p>其中：</p>
                        <p><i class="fa-solid fa-arrow-right"></i> x - 水平位移 (m)</p>
                        <p><i class="fa-solid fa-arrow-right"></i> v<sub>x</sub> - 水平初速度 (m/s)</p>
                        <p><i class="fa-solid fa-arrow-right"></i> t - 时间 (s)</p>
                    </div>
                    <p>水平位移与时间成正比，在坐标图中是一条直线，斜率为水平初速度。</p>
                    
                    <div class="graph-container">
                        <canvas id="linearGraph"></canvas>
                    </div>
                </div>
                
                <div class="column">
                    <h3>垂直方向运动（一元二次函数）</h3>
                    <div class="formula-box">
                        <div class="formula">y = v<sub>y</sub> · t - ½ · g · t²</div>
                        <p>其中：</p>
                        <p><i class="fa-solid fa-arrow-right"></i> y - 垂直位移 (m)</p>
                        <p><i class="fa-solid fa-arrow-right"></i> v<sub>y</sub> - 垂直初速度 (m/s)</p>
                        <p><i class="fa-solid fa-arrow-right"></i> g - 重力加速度 (≈10 m/s²)</p>
                        <p><i class="fa-solid fa-arrow-right"></i> t - 时间 (s)</p>
                    </div>
                    <p>垂直位移与时间是二次函数关系，在坐标图中是一条开口向下的抛物线。</p>
                    
                    <div class="graph-container">
                        <canvas id="quadraticGraph"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2><i class="fa-solid fa-crosshairs"></i> 弹道轨迹模拟</h2>
            <p>调整下方参数，观察不同条件下的弹道轨迹，探索函数图像的变化规律：</p>
            
            <div class="simulation-container">
                <div class="controls">
                    <div class="control-group">
                        <label for="angle"><i class="fa-solid fa-angle-up"></i> 发射角度 θ</label>
                        <input type="range" id="angle" min="10" max="80" value="45">
                        <div class="value-display">45°</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="velocity"><i class="fa-solid fa-gauge-high"></i> 发射速度 v</label>
                        <input type="range" id="velocity" min="20" max="100" value="50">
                        <div class="value-display">50 m/s</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="gravity"><i class="fa-solid fa-weight-hanging"></i> 重力加速度 g</label>
                        <input type="range" id="gravity" min="5" max="15" value="10">
                        <div class="value-display">10 m/s²</div>
                    </div>
                </div>
                
                <div class="simulation-canvas-container">
                    <canvas id="trajectoryGraph"></canvas>
                </div>
                
                <div class="params-display">
                    <div class="param-item">
                        <div class="param-label">发射角度</div>
                        <div class="param-value">45°</div>
                    </div>
                    <div class="param-item">
                        <div class="param-label">发射速度</div>
                        <div class="param-value">50 m/s</div>
                    </div>
                    <div class="param-item">
                        <div class="param-label">重力加速度</div>
                        <div class="param-value">10 m/s²</div>
                    </div>
                    <div class="param-item">
                        <div class="param-label">最大高度</div>
                        <div class="param-value">31.25 m</div>
                    </div>
                    <div class="param-item">
                        <div class="param-label">射程</div>
                        <div class="param-value">250.0 m</div>
                    </div>
                </div>
            </div>
            
            <div class="key-points">
                <div class="point-card">
                    <h3><i class="fa-solid fa-lightbulb"></i> 关键概念总结</h3>
                    <ul>
                        <li>水平位移随时间的变化是线性函数（直线）</li>
                        <li>垂直位移随时间的变化是二次函数（抛物线）</li>
                        <li>轨迹的形状由发射角度和速度决定</li>
                        <li>45°发射角时射程最远（不考虑阻力）</li>
                        <li>抛物线顶点是最高点，此时垂直速度为零</li>
                    </ul>
                </div>
                
                <div class="point-card">
                    <h3><i class="fa-solid fa-gamepad"></i> 游戏中的应用</h3>
                    <ul>
                        <li>狙击时需要计算弹道下坠（抛物线）</li>
                        <li>不同武器有不同的初速度（影响轨迹）</li>
                        <li>跳狙时需考虑水平和垂直运动</li>
                        <li>抛物线原理应用于投掷武器（手雷）</li>
                        <li>理解弹道有助于提高射击精度</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="conclusion">
            <p><i class="fa-solid fa-rocket"></i> 函数是描述物理世界运动规律的重要工具，弹道轨迹让我们直观地看到数学在现实中的应用！</p>
        </div>
    </div>

    <script>
        // 初始化图表
        window.onload = function() {
            // 线性函数图
            const linearCtx = document.getElementById('linearGraph').getContext('2d');
            new Chart(linearCtx, {
                type: 'line',
                data: {
                    labels: [0, 1, 2, 3, 4, 5],
                    datasets: [{
                        label: '水平位移 x = 10t',
                        data: [0, 10, 20, 30, 40, 50],
                        borderColor: '#00FFFF',
                        backgroundColor: 'rgba(0, 255, 255, 0.1)',
                        borderWidth: 3,
                        pointRadius: 6,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '水平位移 (m)',
                                color: '#FFF'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#FFF'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '时间 (s)',
                                color: '#FFF'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#FFF'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#FFF',
                                font: {
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });
            
            // 二次函数图
            const quadraticCtx = document.getElementById('quadraticGraph').getContext('2d');
            new Chart(quadraticCtx, {
                type: 'line',
                data: {
                    labels: [0, 1, 2, 3, 4, 5],
                    datasets: [{
                        label: '垂直位移 y = 25t - 5t²',
                        data: [0, 20, 30, 30, 20, 0],
                        borderColor: '#FFA500',
                        backgroundColor: 'rgba(255, 165, 0, 0.1)',
                        borderWidth: 3,
                        pointRadius: 6,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: '垂直位移 (m)',
                                color: '#FFF'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#FFF'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '时间 (s)',
                                color: '#FFF'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#FFF'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#FFF',
                                font: {
                                    size: 14
                                }
                            }
                        }
                    }
                }
            });
            
            // 初始化弹道轨迹模拟
            initTrajectorySimulation();
        };
        
        // 弹道轨迹模拟
        function initTrajectorySimulation() {
            const canvas = document.getElementById('trajectoryGraph');
            const ctx = canvas.getContext('2d');
            
            // 设置Canvas尺寸
            function setCanvasSize() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
            setCanvasSize();
            
            // 获取控制元素
            const angleSlider = document.getElementById('angle');
            const velocitySlider = document.getElementById('velocity');
            const gravitySlider = document.getElementById('gravity');
            const angleDisplay = angleSlider.nextElementSibling;
            const velocityDisplay = velocitySlider.nextElementSibling;
            const gravityDisplay = gravitySlider.nextElementSibling;
            
            // 参数显示元素
            const displayAngle = document.querySelector('.params-display .param-item:nth-child(1) .param-value');
            const displayVelocity = document.querySelector('.params-display .param-item:nth-child(2) .param-value');
            const displayGravity = document.querySelector('.params-display .param-item:nth-child(3) .param-value');
            const displayMaxHeight = document.querySelector('.params-display .param-item:nth-child(4) .param-value');
            const displayRange = document.querySelector('.params-display .param-item:nth-child(5) .param-value');
            
            // 初始参数
            let angle = 45;
            let velocity = 50;
            let gravity = 10;
            
            // 绘制轨迹函数
            function drawTrajectory() {
                // 清除画布
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 设置坐标系参数
                const originX = 80;
                const originY = canvas.height - 80;
                const scaleX = (canvas.width - 160) / 300; // 300m范围
                const scaleY = (originY - 60) / 70; // 70m高度
                
                // 绘制网格
                ctx.strokeStyle = 'rgba(100, 150, 255, 0.15)';
                ctx.lineWidth = 1;
                
                // 水平网格线
                for (let y = 0; y <= 70; y += 10) {
                    ctx.beginPath();
                    ctx.moveTo(originX, originY - y * scaleY);
                    ctx.lineTo(canvas.width - 80, originY - y * scaleY);
                    ctx.stroke();
                }
                
                // 垂直网格线
                for (let x = 0; x <= 300; x += 50) {
                    ctx.beginPath();
                    ctx.moveTo(originX + x * scaleX, originY);
                    ctx.lineTo(originX + x * scaleX, 60);
                    ctx.stroke();
                }
                
                // 绘制坐标轴
                ctx.beginPath();
                ctx.strokeStyle = '#4b86b4';
                ctx.lineWidth = 3;
                
                // X轴
                ctx.moveTo(originX, originY);
                ctx.lineTo(canvas.width - 60, originY);
                
                // Y轴
                ctx.moveTo(originX, originY);
                ctx.lineTo(originX, 40);
                
                // 箭头
                ctx.moveTo(canvas.width - 60, originY);
                ctx.lineTo(canvas.width - 70, originY - 10);
                ctx.moveTo(canvas.width - 60, originY);
                ctx.lineTo(canvas.width - 70, originY + 10);
                
                ctx.moveTo(originX, 40);
                ctx.lineTo(originX - 10, 50);
                ctx.moveTo(originX, 40);
                ctx.lineTo(originX + 10, 50);
                
                ctx.stroke();
                
                // 绘制刻度
                ctx.fillStyle = '#4b86b4';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                
                // X轴刻度
                for (let i = 0; i <= 300; i += 50) {
                    const x = originX + i * scaleX;
                    ctx.beginPath();
                    ctx.moveTo(x, originY - 8);
                    ctx.lineTo(x, originY + 8);
                    ctx.stroke();
                    ctx.fillText(i + 'm', x, originY + 30);
                }
                
                // Y轴刻度
                ctx.textAlign = 'right';
                for (let i = 0; i <= 70; i += 10) {
                    const y = originY - i * scaleY;
                    ctx.beginPath();
                    ctx.moveTo(originX - 8, y);
                    ctx.lineTo(originX + 8, y);
                    ctx.stroke();
                    ctx.fillText(i + 'm', originX - 15, y + 5);
                }
                
                // 坐标轴标签
                ctx.fillStyle = '#FFA500';
                ctx.textAlign = 'center';
                ctx.font = 'bold 16px Arial';
                ctx.fillText('水平位移 (m)', canvas.width - 100, originY + 50);
                ctx.textAlign = 'right';
                ctx.fillText('垂直位移 (m)', originX - 20, 30);
                
                // 绘制轨迹
                const rad = angle * Math.PI / 180;
                const vx = velocity * Math.cos(rad);
                const vy = velocity * Math.sin(rad);
                
                // 计算轨迹点
                const points = [];
                let maxY = 0;
                let range = 0;
                
                for (let t = 0; t < 20; t += 0.1) {
                    const x = vx * t;
                    const y = vy * t - 0.5 * gravity * t * t;
                    
                    if (y < 0) break;
                    
                    points.push({x, y});
                    if (y > maxY) maxY = y;
                    range = x;
                }
                
                // 绘制轨迹线
                ctx.beginPath();
                ctx.strokeStyle = '#FFD700';
                ctx.lineWidth = 4;
                ctx.shadowColor = 'rgba(255, 215, 0, 0.7)';
                ctx.shadowBlur = 10;
                
                for (let i = 0; i < points.length; i++) {
                    const x = originX + points[i].x * scaleX;
                    const y = originY - points[i].y * scaleY;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    // 绘制轨迹点
                    if (i % 15 === 0) {
                        ctx.beginPath();
                        ctx.fillStyle = '#FF4500';
                        ctx.arc(x, y, 5, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.beginPath();
                        ctx.moveTo(x, y);
                    }
                }
                
                ctx.stroke();
                ctx.shadowBlur = 0;
                
                // 标注顶点
                const tMax = vy / gravity;
                const xMax = vx * tMax;
                const yMax = vy * tMax - 0.5 * gravity * tMax * tMax;
                
                const vertexX = originX + xMax * scaleX;
                const vertexY = originY - yMax * scaleY;
                
                ctx.beginPath();
                ctx.fillStyle = '#00FF00';
                ctx.arc(vertexX, vertexY, 9, 0, Math.PI * 2);
                ctx.fill();
                
                // 绘制发射点
                ctx.beginPath();
                ctx.fillStyle = '#FF0000';
                ctx.arc(originX, originY, 10, 0, Math.PI * 2);
                ctx.fill();
                
                // 更新参数显示
                displayAngle.textContent = angle + '°';
                displayVelocity.textContent = velocity + ' m/s';
                displayGravity.textContent = gravity + ' m/s²';
                displayMaxHeight.textContent = maxY.toFixed(1) + ' m';
                displayRange.textContent = range.toFixed(1) + ' m';
            }
            
            // 更新滑块显示
            function updateSliders() {
                angleDisplay.textContent = angle + '°';
                velocityDisplay.textContent = velocity + ' m/s';
                gravityDisplay.textContent = gravity + ' m/s²';
                drawTrajectory();
            }
            
            // 事件监听
            angleSlider.addEventListener('input', function() {
                angle = parseInt(this.value);
                updateSliders();
            });
            
            velocitySlider.addEventListener('input', function() {
                velocity = parseInt(this.value);
                updateSliders();
            });
            
            gravitySlider.addEventListener('input', function() {
                gravity = parseInt(this.value);
                updateSliders();
            });
            
            // 初始绘制
            updateSliders();
            
            // 窗口大小变化时重新绘制
            window.addEventListener('resize', function() {
                setCanvasSize();
                drawTrajectory();
            });
        }
    </script>
</body>
</html>