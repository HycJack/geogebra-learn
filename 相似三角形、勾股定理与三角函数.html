<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ä¸‰è§’å½¢æ¢ç§˜ä¹‹æ—…ï¼ˆå®Œæ•´äº”å…³+ä¿®å¤é—®é¢˜+æ–°å¢çŸ¥è¯†ç‚¹ï¼‰</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:"Microsoft YaHei",Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#333}
.container{max-width:1000px;margin:0 auto;padding:20px}
.header{text-align:center;color:#fff;margin-bottom:20px}
h1{font-size:28px;margin-bottom:8px}
.nav-tabs{display:flex;justify-content:center;margin-bottom:25px;background:rgba(255,255,255,.25);border-radius:50px;padding:5px}
.nav-tab{padding:10px 28px;color:#fff;border-radius:50px;cursor:pointer;transition:all .3s;margin:0 5px;font-size:16px}
.nav-tab.active{background:#fff;color:#667eea;font-weight:bold}
.content-panel{background:#fff;border-radius:15px;padding:30px;display:none}
.content-panel.active{display:block}
h2{color:#667eea;margin-bottom:15px;text-align:center}
.concept-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin:20px 0}
.concept-card{background:#f8f9fa;border-radius:10px;padding:20px;border-left:5px solid #667eea}
.concept-title{color:#667eea;font-size:20px;margin-bottom:10px;display:flex;align-items:center}
.icon{margin-right:8px;font-size:22px}
.formula-box{background:#eef2ff;padding:12px;border-radius:6px;margin:10px 0;font-family:"Times New Roman",serif}
.example-box{background:#fff3cd;border-radius:8px;padding:20px;margin:20px 0;border-left:4px solid #ffc107}
canvas{border:1px solid #ccc;border-radius:8px;display:block;margin:20px auto;background:#fff}
.start-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:12px 40px;border-radius:30px;font-size:18px;cursor:pointer;margin:20px auto;display:block;transition:.3s}
.start-btn:hover{transform:scale(1.05)}
.level-card{display:none}.level-card.active{display:block}
.level-title{display:flex;align-items:center;color:#667eea;font-size:22px;margin-bottom:15px}
.level-badge{background:#667eea;color:#fff;padding:4px 12px;border-radius:15px;margin-right:12px;font-size:14px}
.game-section{background:#f9f9f9;border-radius:10px;padding:20px;margin-top:20px}
.question{background:#fff;padding:20px;border-radius:8px;margin-bottom:15px}
.options{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
.option{padding:10px;border:2px solid #667eea;border-radius:5px;cursor:pointer;text-align:center;transition:.3s}
.option:hover{background:#667eea;color:#fff}
.option.correct{background:#4caf50 !important;color:#fff !important;border-color:#4caf50 !important}
.option.wrong{background:#f44336 !important;color:#fff !important;border-color:#f44336 !important}
.score{text-align:center;font-size:18px;color:#667eea;margin:10px 0}
.next-btn{background:#667eea;color:#fff;border:none;padding:8px 30px;border-radius:25px;cursor:pointer;font-size:16px;display:block;margin:15px auto}
.next-btn:hover{background:#764ba2}
.progress-bar{background:#e0e0e0;border-radius:10px;height:10px;margin:10px 0}
.progress-fill{background:#667eea;height:100%;border-radius:10px;transition:width .3s}
.feedback{display:none;color:#333;font-size:16px;margin-top:10px;padding:10px;border-radius:5px}
.feedback.correct{background:#e8f5e9}
.feedback.wrong{background:#ffebee}
.reset-btn{background:#ff9800;color:#fff;border:none;padding:8px 30px;border-radius:25px;cursor:pointer;font-size:16px;display:block;margin:15px auto}
.reset-btn:hover{background:#f57c00}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ä¸‰è§’å½¢æ¢ç§˜ä¹‹æ—…</h1>
        <p>çŸ¥è¯†å­¦ä¹  â†’ é—¯å…³æŒ‘æˆ˜ â†’ æŒæ¡åº”ç”¨</p>
    </div>

    <!-- å¯¼èˆª -->
    <div class="nav-tabs">
        <div class="nav-tab active" onclick="showTab('learn')">çŸ¥è¯†å­¦ä¹ </div>
        <div class="nav-tab" onclick="showTab('game')">é—¯å…³æ¸¸æˆ</div>
    </div>

    <!-- ================= çŸ¥è¯†å­¦ä¹ é¢æ¿ ================= -->
    <div class="content-panel active" id="learn-panel">
        <h2>ğŸ“š æ ¸å¿ƒæ¦‚å¿µé¢„ä¹ </h2>
        <div class="concept-grid">
            <div class="concept-card"><div class="concept-title"><span class="icon">ğŸ”º</span>ç›¸ä¼¼ä¸‰è§’å½¢</div><p>å¯¹åº”è§’ç›¸ç­‰ï¼Œå¯¹åº”è¾¹æˆæ¯”ä¾‹çš„ä¸¤ä¸ªä¸‰è§’å½¢ã€‚</p><div class="formula-box">æ¯”ä¾‹å…³ç³»ï¼š\(\dfrac{a}{a'}=\dfrac{b}{b'}=\dfrac{c}{c'}=k\)</div></div>
            <div class="concept-card"><div class="concept-title"><span class="icon">ğŸ“</span>å‹¾è‚¡å®šç†</div><p>ç›´è§’ä¸‰è§’å½¢ä¸¤ç›´è§’è¾¹çš„å¹³æ–¹å’Œç­‰äºæ–œè¾¹å¹³æ–¹ã€‚</p><div class="formula-box">\(a^2+b^2=c^2\)</div></div>
            <div class="concept-card"><div class="concept-title"><span class="icon">ğŸ“Š</span>é”è§’ä¸‰è§’å‡½æ•°</div><div class="formula-box">\(\sin\theta=\dfrac{å¯¹}{æ–œ}\)<br>\(\cos\theta=\dfrac{é‚»}{æ–œ}\)<br>\(\tan\theta=\dfrac{å¯¹}{é‚»}\)</div></div>
            <div class="concept-card"><div class="concept-title"><span class="icon">ğŸ“</span>å¤§åœ°æµ‹é‡åº”ç”¨</div><div class="formula-box">é«˜åº¦ = åŸºçº¿ Ã— tan(ä»°è§’)</div></div>
            <div class="concept-card"><div class="concept-title"><span class="icon">ğŸ”¢</span>ä¸‰è§’æ’ç­‰å¼</div><p>åœ¨ç›´è§’ä¸‰è§’å½¢ä¸­ï¼Œ\(\sin^2\theta + \cos^2\theta = 1\)ã€‚ä¸å‹¾è‚¡å®šç†ç›¸å…³ï¼šå½“æ–œè¾¹ä¸º1æ—¶ï¼Œ\(\sin\theta\) å’Œ \(\cos\theta\) åˆ†åˆ«ä¸ºä¸¤ç›´è§’è¾¹ï¼Œæ»¡è¶³ \(a^2 + b^2 = c^2\)ã€‚</p><div class="formula-box">\(\sin^2\theta + \cos^2\theta = 1\)</div></div>
        </div>

        <!-- ä¾‹é¢˜1ï¼šå‹¾è‚¡å®šç† -->
        <div class="example-box">
            <h3>ä¾‹é¢˜1ï¼šå‹¾è‚¡å®šç†åº”ç”¨</h3>
            <p>å·²çŸ¥ç›´è§’ä¸‰è§’å½¢ä¸¤ç›´è§’è¾¹åˆ†åˆ«ä¸º <strong>6 cm</strong> å’Œ <strong>8 cm</strong>ï¼Œæ±‚æ–œè¾¹é•¿åº¦ã€‚</p>
            <div class="formula-box">è§£ï¼š\(c=\sqrt{6^2+8^2}=10\text{ cm}\)</div>
            <canvas id="ex1-canvas" width="360" height="200"></canvas>
            <button class="start-btn" onclick="animateEx1()">é‡ç”»ç¤ºæ„å›¾</button>
        </div>

        <!-- ä¾‹é¢˜2ï¼šå¤§åœ°æµ‹é‡ -->
        <div class="example-box">
            <h3>ä¾‹é¢˜2ï¼šåˆ©ç”¨ä¸‰è§’å‡½æ•°æµ‹æ¥¼é«˜</h3>
            <p>å°æ˜åœ¨è·å¤§æ¥¼åº•éƒ¨ <strong>50 m</strong> å¤„æµ‹å¾—æ¥¼é¡¶ä»°è§’ <strong>30Â°</strong>ï¼Œæ±‚å¤§æ¥¼é«˜åº¦ã€‚</p>
            <div class="formula-box">è§£ï¼š\(h=50\tan30^\circ\approx28.87\text{ m}\)</div>
            <canvas id="ex2-canvas" width="360" height="200"></canvas>
            <button class="start-btn" onclick="animateEx2()">é‡ç”»ç¤ºæ„å›¾</button>
        </div>
        <button class="start-btn" onclick="startGame()">æˆ‘å·²æŒæ¡ï¼Œå¼€å§‹é—¯å…³ï¼</button>
    </div>

    <!-- ================= é—¯å…³æ¸¸æˆé¢æ¿ ================= -->
    <div class="content-panel" id="game-panel">
        <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width:0%"></div></div>
        <!-- ç¬¬1å…³ï¼šç›¸ä¼¼ä¸‰è§’å½¢ -->
        <div class="level-card active" id="level1">
            <div class="level-title"><span class="level-badge">ç¬¬1å…³</span>ç›¸ä¼¼ä¸‰è§’å½¢çš„å¥¥ç§˜</div>
            <canvas id="canvas1" width="360" height="200"></canvas>
            <div class="game-section">
                <div class="question">
                    å·²çŸ¥ä¸¤ç›¸ä¼¼ä¸‰è§’å½¢ï¼Œç¬¬ä¸€ç»„è¾¹é•¿ä¸º 2,3,4 cmï¼Œç¬¬äºŒç»„æœ€çŸ­è¾¹ä¸º 4 cmï¼Œæ±‚å…¶ä½™ä¸¤è¾¹ã€‚
                    <div class="options">
                        <div class="option" data-val="6,8">6 cm, 8 cm</div>
                        <div class="option" data-val="5,7">5 cm, 7 cm</div>
                        <div class="option" data-val="8,10">8 cm, 10 cm</div>
                        <div class="option" data-val="4,6">4 cm, 6 cm</div>
                    </div>
                    <div class="feedback" id="feedback1"></div>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score1">0</span></div>
                <button class="next-btn" onclick="showLevel(2)">ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- ç¬¬2å…³ï¼šå‹¾è‚¡å®šç† -->
        <div class="level-card" id="level2">
            <div class="level-title"><span class="level-badge">ç¬¬2å…³</span>å‹¾è‚¡å®šç†å®æˆ˜</div>
            <canvas id="canvas2" width="360" height="200"></canvas>
            <div class="game-section">
                <div class="question">
                    ç›´è§’è¾¹ä¸º 6 cm ä¸ 8 cm æ—¶ï¼Œæ–œè¾¹é•¿ä¸ºå¤šå°‘ï¼Ÿ
                    <div class="options">
                        <div class="option" data-val="10">10 cm</div>
                        <div class="option" data-val="12">12 cm</div>
                        <div class="option" data-val="14">14 cm</div>
                        <div class="option" data-val="9">9 cm</div>
                    </div>
                    <div class="feedback" id="feedback2"></div>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score2">0</span></div>
                <button class="next-btn" onclick="showLevel(3)">ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- ç¬¬3å…³ï¼šé”è§’ä¸‰è§’å‡½æ•° -->
        <div class="level-card" id="level3">
            <div class="level-title"><span class="level-badge">ç¬¬3å…³</span>é”è§’ä¸‰è§’å‡½æ•°</div>
            <canvas id="canvas3" width="360" height="200"></canvas>
            <div class="game-section">
                <div class="question">
                    æ–œè¾¹ 10 cmï¼Œè§’ 30Â° æ—¶çš„å¯¹è¾¹é•¿åº¦ä¸ºï¼Ÿ
                    <div class="options">
                        <div class="option" data-val="5">5 cm</div>
                        <div class="option" data-val="5âˆš3">\(5\sqrt3\) cm</div>
                        <div class="option" data-val="8.66">8.66 cm</div>
                        <div class="option" data-val="10">10 cm</div>
                    </div>
                    <div class="feedback" id="feedback3"></div>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score3">0</span></div>
                <button class="next-btn" onclick="showLevel(4)">ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- ç¬¬4å…³ï¼šç»¼åˆæµ‹é‡ -->
        <div class="level-card" id="level4">
            <div class="level-title"><span class="level-badge">ç¬¬4å…³</span>ç»¼åˆæµ‹é‡æŒ‘æˆ˜</div>
            <canvas id="canvas4" width="360" height="200"></canvas>
            <div class="game-section">
                <div class="question">
                    æŸæ¥¼å½±é•¿ 50 mï¼ŒåŒæ—¶ 1 m æ†å½±é•¿ 0.8 mï¼Œæ±‚æ¥¼é«˜ã€‚
                    <div class="options">
                        <div class="option" data-val="62.5">62.5 m</div>
                        <div class="option" data-val="40">40 m</div>
                        <div class="option" data-val="50">50 m</div>
                        <div class="option" data-val="80">80 m</div>
                    </div>
                    <div class="feedback" id="feedback4"></div>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score4">0</span></div>
                <button class="next-btn" onclick="showLevel(5)">ä¸‹ä¸€å…³</button>
            </div>
        </div>

        <!-- ç¬¬5å…³ï¼šå¤§è¾¹å¯¹å¤§è§’ -->
        <div class="level-card" id="level5">
            <div class="level-title"><span class="level-badge">ç¬¬5å…³</span>å¤§è¾¹å¯¹å¤§è§’</div>
            <canvas id="canvas5" width="360" height="200"></canvas>
            <div class="game-section">
                <div class="question">
                    ä¸‰è§’å½¢è¾¹é•¿ä¸º 5 cm, 7 cm, 8 cmï¼Œå“ªä¸ªè§’æœ€å¤§ï¼Ÿ
                    <div class="options">
                        <div class="option" data-val="82">å¯¹è¾¹ 8 cm çš„è§’ï¼ˆçº¦82Â°ï¼‰</div>
                        <div class="option" data-val="56">å¯¹è¾¹ 7 cm çš„è§’ï¼ˆçº¦56Â°ï¼‰</div>
                        <div class="option" data-val="42">å¯¹è¾¹ 5 cm çš„è§’ï¼ˆçº¦42Â°ï¼‰</div>
                        <div class="option" data-val="60">æ‰€æœ‰è§’ç›¸ç­‰ï¼ˆ60Â°ï¼‰</div>
                    </div>
                    <div class="feedback" id="feedback5"></div>
                </div>
                <div class="score">å¾—åˆ†ï¼š<span id="score5">0</span></div>
                <div id="final-result" style="font-size:20px;text-align:center;color:#667eea;margin-top:10px"></div>
                <button class="reset-btn" onclick="resetGame()">é‡æ–°å¼€å§‹</button>
            </div>
        </div>
    </div>
</div>

<script>
/* ===== é€šç”¨ ===== */
const $=id=>document.getElementById(id);
function showTab(t){
    [...document.querySelectorAll('.nav-tab')].forEach(n=>n.classList.remove('active'));
    [...document.querySelectorAll('.content-panel')].forEach(p=>p.classList.remove('active'));
    document.querySelector(`[onclick="showTab('${t}')"]`).classList.add('active');
    $(t+'-panel').classList.add('active');
}
function startGame(){
    showTab('game');
    showLevel(1);
    updateProgress(1);
}
function showLevel(n){
    [...document.querySelectorAll('.level-card')].forEach(c=>c.classList.remove('active'));
    $(`level${n}`).classList.add('active');
    drawGameCanvas(n);
    updateProgress(n);
}
function updateProgress(level){
    const progress=(level-1)/5*100;
    $('progress-fill').style.width=`${progress}%`;
}
function resetGame(){
    [1,2,3,4,5].forEach(i=>{
        $(`score${i}`).textContent='0';
        $(`score${i}`).style.color='#667eea';
        $(`feedback${i}`).style.display='none';
        $(`level${i}`).querySelectorAll('.option').forEach(o=>{
            o.classList.remove('correct','wrong');
            o.style.pointerEvents='auto';
            o.style.background=''; // Reset background
            o.style.color=''; // Reset color
            o.style.borderColor=''; // Reset border
        });
    });
    $('final-result').innerHTML='';
    showLevel(1);
}

/* ========= çŸ¥è¯†ä¸»é¡µä¾‹é¢˜ç»˜å›¾ ========= */
function animateEx1(){
    const c=$('ex1-canvas'),ctx=c.getContext('2d');
    ctx.clearRect(0,0,c.width,c.height);
    let progress=0;
    function draw(){
        ctx.clearRect(0,0,c.width,c.height);
        ctx.strokeStyle='#667eea';ctx.lineWidth=3;
        ctx.beginPath();
        ctx.moveTo(60,160);
        ctx.lineTo(60,160-progress*100);
        ctx.lineTo(60+progress*120,160);
        ctx.closePath();
        ctx.stroke();
        if(progress>=1){
            ctx.beginPath();ctx.moveTo(70,150);ctx.lineTo(70,160);ctx.lineTo(60,150);ctx.stroke();
            ctx.fillStyle='#333';ctx.font='16px Arial';
            ctx.fillText('6 cm',30,110);ctx.fillText('8 cm',115,175);ctx.fillText('10 cm',120,110);
        }
        progress+=0.05;
        if(progress<=1)requestAnimationFrame(draw);
    }
    draw();
}
function animateEx2(){
    const c=$('ex2-canvas'),ctx=c.getContext('2d');
    ctx.clearRect(0,0,c.width,c.height);
    let progress=0;
    function draw(){
        ctx.clearRect(0,0,c.width,c.height);
        ctx.beginPath();ctx.moveTo(0,160);ctx.lineTo(c.width*progress,160);ctx.stroke();
        ctx.fillStyle='#667eea';ctx.fillRect(220,40,30,120*progress);
        ctx.beginPath();ctx.moveTo(40,160);ctx.lineTo(220*progress,40*progress);ctx.strokeStyle='#f44336';ctx.stroke();
        if(progress>=1){
            ctx.beginPath();ctx.arc(40,160,30,-Math.PI/2,-Math.PI/6,true);ctx.stroke();
            ctx.fillStyle='#333';ctx.font='14px Arial';
            ctx.fillText('50 m',120,175);ctx.fillText('30Â°',60,140);ctx.fillText('h=?',255,90);
        }
        progress+=0.05;
        if(progress<=1)requestAnimationFrame(draw);
    }
    draw();
}

/* ========= æ¸¸æˆå…³å¡ç»˜å›¾ ========= */
function drawGameCanvas(n){
    const c=$(`canvas${n}`);if(!c)return;
    const ctx=c.getContext('2d');c.width=360;c.height=200;
    ctx.clearRect(0,0,360,200);
    ctx.lineWidth=3;ctx.strokeStyle='#667eea';ctx.fillStyle='#333';ctx.font='14px Arial';
    switch(n){
        case 1:
            ctx.beginPath();ctx.moveTo(60,160);ctx.lineTo(120,60);ctx.lineTo(180,160);ctx.closePath();ctx.stroke();
            ctx.strokeStyle='#764ba2';
            ctx.beginPath();ctx.moveTo(220,160);ctx.lineTo(280,100);ctx.lineTo(340,160);ctx.closePath();ctx.stroke();
            ctx.fillText('2 cm',80,110);ctx.fillText('3 cm',150,170);ctx.fillText('4 cm',120,80);
            ctx.fillText('4 cm,?,?',280,120);
            break;
        case 2:
            ctx.beginPath();ctx.moveTo(60,160);ctx.lineTo(60,60);ctx.lineTo(180,160);ctx.closePath();ctx.stroke();
            ctx.beginPath();ctx.moveTo(70,150);ctx.lineTo(70,160);ctx.lineTo(60,150);ctx.stroke();
            ctx.fillText('6 cm',30,110);ctx.fillText('8 cm',115,175);ctx.fillText('? cm',120,110);
            break;
     case 3:
    ctx.strokeStyle = '#667eea';
    ctx.lineWidth = 3;

    /* 30Â°-60Â°-90Â° æ ‡å‡†ç›´è§’ä¸‰è§’å½¢
       é‚»è¾¹ : å¯¹è¾¹ : æ–œè¾¹ = âˆš3 : 1 : 2
       å–æ¯”ä¾‹ 5âˆš3 â‰ˆ 8.66  | 5 | 10
    */
    const OX = 60, OY = 160;                 // ç›´è§’é¡¶ç‚¹
    const adj = 5 * Math.sqrt(3) * 12;     // é‚»è¾¹é•¿åº¦ â‰ˆ 8.66 * 12 â‰ˆ 104
    const opp = 5 * 12;                    // å¯¹è¾¹é•¿åº¦ = 60
    const hyp = 10 * 12;                   // æ–œè¾¹é•¿åº¦ = 120

    ctx.beginPath();
    ctx.moveTo(OX, OY);                    // ç›´è§’ç‚¹
    ctx.lineTo(OX, OY - adj);              // é‚»è¾¹ï¼ˆå‘ä¸Šï¼‰
    ctx.lineTo(OX + opp, OY);              // å¯¹è¾¹ï¼ˆå‘å³ï¼‰
    ctx.closePath();                       // æ–œè¾¹
    ctx.stroke();

    /* ç›´è§’æ ‡è®° */
    ctx.beginPath();
    ctx.moveTo(OX + 10, OY - 10);
    ctx.lineTo(OX + 10, OY);
    ctx.lineTo(OX, OY - 10);
    ctx.strokeStyle = '#333';
    ctx.stroke();

    /* 30Â° çº¢è‰²å¼§çº¿ï¼šå·¦ä¸Šè§’ */
    ctx.beginPath();
    ctx.arc(OX , OY - adj, 20, Math.PI/3, Math.PI/2, false);
    ctx.strokeStyle = '#f44336';
    ctx.lineWidth = 2;
    ctx.stroke();

    /* æ ‡æ³¨ */
    ctx.fillStyle = '#333';
    ctx.font = '14px Arial';
    ctx.fillText('30Â°', OX -30, OY - adj + 15);        // è§’åº¦
    ctx.fillText('é‚»è¾¹ 5âˆš3', OX - 50, OY - adj / 2);     // AB
    ctx.fillText('å¯¹è¾¹ 5', OX + opp / 2 + 5, OY + 15);  // BC
    ctx.fillText('æ–œè¾¹ 10', OX + opp / 2 - 5, OY - adj / 2 + 10); // AC
    break;
   case 4:
            ctx.beginPath();ctx.moveTo(0,160);ctx.lineTo(360,160);ctx.stroke();
            ctx.fillStyle='#667eea';ctx.fillRect(220,40,30,120);
            ctx.fillStyle='#333';ctx.fillRect(50,150,1,10);
            ctx.fillText('1 m',55,145);ctx.fillText('50 m',120,175);ctx.fillText('0.8 m',25,170);
            ctx.fillText('h=?',255,90);
            break;
        case 5:
            ctx.beginPath();ctx.moveTo(60,160);ctx.lineTo(180,80);ctx.lineTo(220,160);ctx.closePath();ctx.stroke();
            ctx.fillText('5 cm',190,160);ctx.fillText('7 cm',100,100);ctx.fillText('8 cm',110,170);
            ctx.fillText('A',65,150);ctx.fillText('B',185,90);ctx.fillText('C',215,150);
            break;
    }
}

/* ===== é€‰é¡¹å¤„ç† ===== */
document.addEventListener('click',e=>{
    if(!e.target.classList.contains('option'))return;
    const opt=e.target,box=opt.parentElement;
    const levelCard=opt.closest('.level-card');
    if(!levelCard)return;
    const level=levelCard.id.replace('level','');
    const ans=['6,8','10','5','62.5','82'][level-1];
    const ok=opt.getAttribute('data-val')===ans;
    opt.classList.remove('correct','wrong');
    opt.classList.add(ok?'correct':'wrong');
    if(ok){
        $(`score${level}`).textContent='20';
        $(`score${level}`).style.color='#4caf50';
    }
    box.querySelectorAll('.option').forEach(o=>{
        o.style.pointerEvents='none';
        o.classList.remove('correct','wrong');
        if(o.getAttribute('data-val')===ans){
            o.classList.add('correct');
        }else if(o===opt && !ok){
            o.classList.add('wrong');
        }
    });
    const feedback=$(`feedback${level}`);
    feedback.style.display='block';
    feedback.classList.remove('correct','wrong');
    feedback.classList.add(ok?'correct':'wrong');
    feedback.innerHTML=ok?getCorrectFeedback(level):getWrongFeedback(level,ans);
    if(level==='5'&&ok){
        const total=[1,2,3,4,5].reduce((s,i)=>s+(Number($(`score${i}`).textContent)||0),0);
        $('final-result').innerHTML=`ğŸ‰ å…¨éƒ¨å®Œæˆï¼æ€»å¾—åˆ†ï¼š${total}/100`;
    }
});
function getCorrectFeedback(level){
    switch(level){
        case '1':return 'å¤ªæ£’äº†ï¼ç›¸ä¼¼ä¸‰è§’å½¢å¯¹åº”è¾¹æˆæ¯”ä¾‹ï¼Œ4Ã·2=2ï¼Œæ‰€ä»¥3Ã—2=6ï¼Œ4Ã—2=8ã€‚';
        case '2':return 'æ­£ç¡®ï¼æ ¹æ®å‹¾è‚¡å®šç†ï¼Œ6Â²+8Â²=100ï¼Œâˆš100=10 cmã€‚';
        case '3':return 'å¹²å¾—å¥½ï¼sin 30Â°=1/2ï¼Œå¯¹è¾¹=10Ã—1/2=5 cmã€‚';
        case '4':return 'å®Œç¾ï¼æ†é«˜1 mï¼Œå½±é•¿0.8 mï¼Œæ¯”ä¾‹ä¸º1/0.8=1.25ï¼Œæ¥¼é«˜=50Ã—1.25=62.5 mã€‚';
        case '5':return 'ä¼˜ç§€ï¼ä¸‰è§’å½¢ä¸­ï¼Œæœ€å¤§è¾¹8 cmå¯¹æœ€å¤§è§’ï¼Œçº¦82Â°ã€‚';
    }
}
function getWrongFeedback(level,ans){
    switch(level){
        case '1':return `ä¸å¯¹å“¦ï¼ç›¸ä¼¼æ¯”ä¾‹ä¸º4Ã·2=2ï¼Œæ‰€ä»¥è¾¹é•¿ä¸º3Ã—2=${ans.split(',')[0]}ï¼Œ4Ã—2=${ans.split(',')[1]}ã€‚`;
        case '2':return `å†æƒ³æƒ³ï¼å‹¾è‚¡å®šç†ï¼š6Â²+8Â²=100ï¼Œâˆš100=${ans} cmã€‚`;
        case '3':return `é”™äº†ï¼sin 30Â°=1/2ï¼Œå¯¹è¾¹=10Ã—1/2=${ans} cmã€‚`;
        case '4':return `ä¸å¯¹ï¼æ†é«˜1 mï¼Œå½±é•¿0.8 mï¼Œæ¯”ä¾‹1/0.8=1.25ï¼Œæ¥¼é«˜=50Ã—1.25=${ans} mã€‚`;
        case '5':return `ä¸å¯¹ï¼æœ€å¤§è¾¹8 cmå¯¹æœ€å¤§è§’ï¼Œçº¦${ans}Â°ã€‚ä½¿ç”¨ä½™å¼¦å®šç†è®¡ç®—ã€‚`;
    }
}

/* åˆå§‹åŒ– */
window.onload=()=>{animateEx1();animateEx2();};
</script>
</body>
</html>